<!doctype html>
<html lang="zh-cn">
  <head>
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <title>camera</title>
    <link rel="stylesheet" href="../../bower_components/bootstrap/dist/css/bootstrap.min.css">
    <link rel="stylesheet" href="../../bower_components/fontawesome/css/font-awesome.min.css">
    <link rel="stylesheet" href="../../bower_components/Buttons/css/buttons.min.css">
    <link rel="stylesheet" href="../css/bootstrap-nav-wizard.css">
    <link rel="stylesheet" href="../css/cook.css">

    <script src="../../bower_components/jquery/dist/jquery.min.js"></script>
  </head>
  <body>
    <div class="container header">
        <div  class="row">
			<img  src="../image/logo-jsnx.png" style="margin-left:-60px !important;">
		</div>
	</div>

<div class="container apply">
<div class="row">
    <div class="div_right col-md-12">
        <div class="indicates">
    		<span id="timeout" class="timeout pull-right">60</span>
            <h1>拍照认证</h1>
    	</div>

    	<div class="step">
            <div style="margin-left:5px; margin-top:20px;font-family:微软雅黑; font-size:20px;">请您去除帽子、墨镜等遮挡物，对准上方摄像头点击"开始拍照"按钮进行拍照</div>
            <div id="frame1" style="margin-left:5px;margin-top:20px;">
           


 <div id="Layer2" align="left" style="width:450px; height:300px; ">
 <object id="AmFaceControl" classid="CLSID:95C661EC-11BE-4018-BD97-5549A7754417" width="450" height="300" title="AmFaceControl">
  </object>

 </div>
<div id="Layer3" align="left" style="top:148px;left:500px;background:#000000;width:320px; height:300px; visibility:visible;position:absolute"></div>
<div id="idcard" align="left" style="top:148px;left:880px;background:url(C:/2.BMP) 0% 0% / cover;width:204px; height:252px; visibility:visible;position:absolute"></div>

                </div>

            <div align="left"  style="margin-left:25px; margin-top:15px;">
                <input type="button" id="btn_start" value="准备拍照" onclick = "openCamera()" style=" width:400px; height:60px;border:0px;background:#3a6fb3; color:#FFFFFF; font-size:24px; font-family:方正粗倩简体; "/>
                <input type="button" id="btn_restart" value="拍 照" onclick = "captureImage()" style=" display:block;top:463px;margin-left:465px;width:160px; height:60px; border:0px;background:#46b963; color:#FFFFFF; font-size:24px; font-family:方正粗倩简体; outline:none;visibility:visible;position:absolute"/>
                <input type="button" id="btn_confirm" class="normal" value="比 对" onclick = "verifyImage()" style=" top:463px;left:655px;display:block;width:160px; height:60px; border:0px;background:#3b6fb4; color:#FFFFFF; font-size:24px; font-family:方正粗倩简体; outline:none;visibility:visible;position:absolute"/>
				<input type="button" id="btn_confirm" class="normal" value="确 定" onclick= "confirm()" style=" top:463px;left:905px;display:block;width:160px; height:60px; border:0px;background:#3b6fb4; color:#FFFFFF; font-size:24px; font-family:方正粗倩简体; outline:none;visibility:visible;position:absolute"/>
                      
		   </div>
    		<span style="margin-left:25px; color:red; margin-top:20px;font-family:微软雅黑; font-size:20px;">请在摄像框页面中出现绿色对焦框后再摆好姿势</span>
    	</div>
    </div>
</div>
</div>
<EMBED id="MUSIC1" SRC="../wav/请您摘除帽子等遮挡物进行拍照.wav" Loop=false AUTOSTART=false Hidden=true MASTERSOUND>

    <footer class="footer">
      <div class="container">
		<div class="row">
			<div class="col-md-6">
				<div class="footerinfo" style="float:left ;">http://www.js96008 </div>
				<a href="index.html#/pages" style="color:#ffffff;float:right;"><i class="fa fa-bars"></i>index</a>
			</div>
			<div class="col-md-6">
				<div class="footerinfo" style="float:right; ">服务热线：96008 </div>
			</div>
		</div>
      </div>
    </footer>

  </body>
<script language="javascript" type="text/javascript" FOR="AmFaceControl" event="OnCaptureFinish(success)">

	if (success == 1){
	document.getElementById("Layer3").style.background = "url(C:/1.jpg) 0% 0% / cover"
 		alert("拍照成功");
	}else if(success ==0){
		alert("拍照超时，请重新拍照");
	}else if(success ==-1){
		alert("拍照失败，请重新拍照");
	}else if(success ==-2){
		alert("设备超时，请重置设备后再进行拍照");
}
</script>
<script language="javascript" type="text/javascript">
function confirm() {
	window.location.href="http://127.0.0.1/custom/flow2?actionId=timeout&page=cardInsert&mode=file";
}
function openCamera()
{
	var ret = AmFaceControl.OpenDevice();
	if (ret != 0)
		alert("open device failed");
}	

function closeCamera()
{
	var ret = AmFaceControl.CloseDevice();
	if (ret != 0)
		alert("close device failed");
}

function captureImage()
{
	var ret = AmFaceControl.CaptureImage("C:\\1.jpg",10000);
	if (ret == -1)
	     alert("摄像未开启");
	if (ret == -3)
	     alert("摄像正在开启，请稍后再试");
	
        
}

function verifyImage()
{
	var score = AmFaceControl.Verify("C:\\1.jpg", "C:\\2.jpg");
	if (score < 0)
		alert("verify failed");
	else
		alert(score);
}

</script>
</html>
